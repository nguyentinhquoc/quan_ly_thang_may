<%- include('../../layout/header') %>




<div class="tab-pane preview-tab-pane active" role="tabpanel" aria-labelledby="tab-dom-da4be276-f13c-47d6-be82-655bc6452fd5" id="dom-da4be276-f13c-47d6-be82-655bc6452fd5">
  <h4 class="mt-3">Danh sách dự án bảo trì</h4>
  
  <div id="tableExample3" data-list='{"valueNames":["name","time","trangthai","action"],"page":20,"pagination":true}'>
    
    <div class="row justify-content-end g-0">

      <div class="col-auto col-sm-5 mb-3">
       
        <form>

          <div class="input-group"><input class="form-control form-control-sm shadow-none search" type="search" placeholder="Search..." aria-label="search" />
            <div class="input-group-text bg-transparent"><span class="fa fa-search fs-10 text-600"></span></div>
          </div>
        </form>
      </div>
    </div>
    <div class="table-responsive scrollbar">
      <table class="table table-bordered table-striped fs-10 mb-0">
        <thead class="bg-200">
          <tr>
            <th class="text-900 sort" data-sort="name">Tên khách hàng</th>
            <th class="text-900 sort" data-sort="time">Ngày bảo trì</th>
            <th class="text-900 sort" data-sort="address">Trạng thái</th>
            <th class="text-900 sort" data-sort="action">Tương tác</th>
          </tr>
        </thead>
        <tbody class="list">
          <% maintenances.forEach(function(maintenance, key) { %>
            <tr>
            <td class="name"><%= maintenance.project.full_name %></td>
            <td class="phone"><%= maintenance.time %></td>
            <td class="address"><%= project.address %></td>
            <td class="trangthai">
              <span class="block-email" >
                <% if (maintenance.maintenanceActions.length === 0) { %>
                  Chưa bảo trì
              <% } else {
                  let allCompleted = maintenance.maintenanceActions.every(function(action) { return action.status == 1; });
              %>
                  <% if(allCompleted) { %>
                      Đã hoàn thành
                  <% } else { %>
                      Chưa hoàn thành
                  <% } %>
              <% } %>
              </span>
            </td>
            <td class="time"><%= project.baoHanh %></td>
            <td class="action">
             <div class="table-data-feature">
                <a  href="/project/<%= project.id %>" class="item edit-btn btn-primary m-1 " data-toggle="tooltip" data-placement="top" title="Edit">
                  <i class="fas fa-edit "></i>
                </a>
                <a href="/project/detail/<%= project.id %>" class="item" data-toggle="tooltip" data-placement="top" title data-original-title="Chi tiết">
                  <i class="fas fa-info-circle"></i>
                </a>
                <a href="maintenance/project/<%= project.id %>" class="item delete-btn btn-danger m-1" data-toggle="tooltip" data-placement="top" title="Delete">
                  <i class="fas fa-wrench"></i>

                </a>
              </div>
            </td>
          </tr>
          <tr class="spacer"></tr>
          <% }); %>
          
        </tbody>
      </table>
    </div>
    <div class="d-flex justify-content-center mt-3"><button class="btn btn-sm btn-falcon-default me-1" type="button" title="Previous" data-list-pagination="prev"><span class="fas fa-chevron-left"></span></button>
      <ul class="pagination mb-0"></ul><button class="btn btn-sm btn-falcon-default ms-1" type="button" title="Next" data-list-pagination="next"><span class="fas fa-chevron-right"> </span></button>
    </div>
  </div>
</div>








<%- include('../../layout/footer') %>
